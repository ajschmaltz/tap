{"version":3,"sources":["app.coffee"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"/source/","sourcesContent":["getCookie = (name) ->\n  for cookie in document.cookie.split ';' when cookie and name is (cookie.split '=')[0]\n    return decodeURIComponent cookie[(1 + name.length)...]\n  null\n\nbuttons = []\nelements = document.getElementsByClassName(\"shutter\")\nArray::forEach.call elements, (el) ->\n  buttons.push element: el\n\nuploader = new qq.FineUploaderBasic\n  extraButtons: buttons\n  element: document.getElementById 'fine-uploader'\n  request:\n    endpoint: '/upload'\n    customHeaders:\n        'X-XSRF-TOKEN': getCookie 'XSRF-TOKEN'\n  callbacks:\n    onSubmitted: (id, name) ->\n      button = @getButton(id)\n      mycanvas = document.createElement \"img\"\n      mycanvas.className = \"preview\"\n      uploader.drawThumbnail id, mycanvas, 1000\n      button.parentNode.getElementsByClassName('gallery')[0].appendChild mycanvas\n\n$(\"#fullpage\").submit (e) ->\n  e.preventDefault()\n  lead = $(this).serializeArray()\n  lead.push({name: 'photos', value: JSON.stringify(uploader.getUploads()) })\n  console.log lead\n  $.post '/lead', lead, ->\n    window.location.replace(\"/\")\n\ninitializeMap = ->\n  window.geocoder = new google.maps.Geocoder()\n  mapOptions = zoom: 14\n  window.map = new google.maps.Map(document.getElementById(\"map-canvas\"), mapOptions)\n\n  # Try HTML5 geolocation\n  if navigator.geolocation\n    navigator.geolocation.getCurrentPosition ((position) ->\n      pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude)\n      window.map.setCenter pos\n      console.log(pos.A)\n      $(\"#location\").val pos\n      window.marker = new google.maps.Marker(\n        map: window.map\n        position: pos\n        draggable: true\n      )\n    ), ->\n      handleNoGeolocation true\n\n  else\n\n    # Browser doesn't support Geolocation\n    handleNoGeolocation false\nhandleNoGeolocation = (errorFlag) ->\n  if errorFlag\n    content = \"Error: The Geolocation service failed.\"\n  else\n    content = \"Error: Your browser doesn't support geolocation.\"\n  options =\n    map: map\n    position: new google.maps.LatLng(60, 105)\n    content: content\n\n  infowindow = new google.maps.InfoWindow(options)\n  window.map.setCenter options.position\nmap = undefined\n\nclass Map\n  init = false\n  this.boot = ->\n    if init is false\n      init = true\n      initializeMap()\n\n$(document).ready ->\n  $(\"#geocode\").click ->\n    address = document.getElementById(\"address\").value\n    window.geocoder.geocode\n      address: address\n    , (results, status) ->\n      if status is google.maps.GeocoderStatus.OK\n        window.map.setCenter results[0].geometry.location\n        window.marker.setPosition results[0].geometry.location\n      else\n        alert \"Geocode was not successful for the following reason: \" + status\n\n  $(\"#fullpage\").fullpage\n    controlArrows: false,\n    verticalCentered: false,\n    loopHorizontal: false,\n    css3: true\n    afterLoad: (anchorLink, index, slideAnchor, slideIndex) ->\n      Map.boot() if index is 2 and document.getElementById(\"map-canvas\")\n      return\n\n  max_fields = 10 #maximum input boxes allowed\n  wrapper = $(\"#photos\") #Fields wrapper\n  add_button = $(\"#add_photo\") #Add button ID\n  x = 1 #initlal text box count\n  $(add_button).click (e) -> #on add input button click\n    e.preventDefault()\n    if x < max_fields #max input box allowed\n      x++ #text box increment\n      $(wrapper).append \"<div class=\\\"form-group\\\"><label class=\\\"col-md-4 control-label\\\">Take a Photo of<\\/label><div class=\\\"col-md-6\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"photos[]\\\"><\\/div><\\/div>\" #add input box\n\n  $(wrapper).on \"click\", \".remove_field\", (e) -> #user click on remove text\n    e.preventDefault()\n    $(this).parent(\"div\").remove()\n    x--"]}